<html lang="en" xml:lang="en"><head>
<META http-equiv="Content-Type" content="text/html">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"><META name="description" content="The Query widget allows you to build your own query for the application."><meta name="content-language" content="en"><link href="rsrc/htmlhelp.css" rel="stylesheet" type="text/css"><title>Web AppBuilder for ArcGIS | Help - 
Query widget
</title>
                <script type="text/javascript" language="JavaScript">
                    var pathL  = self.location.pathname.split ("/");
                    var fname = pathL[pathL.length-1];
                    var i = fname.lastIndexOf (".htm");
                    if (i>=0) {
                    fname = fname.substring (0, i)
                    } else {
                    //??
                    }
                    if (self.location.hash) {
				    		      fname = fname + self.location.hash;
						        }
                    self.location.replace ("../index.html#//" + fname);
                </script>
                </head><!--Publication GUID: [GUID-E7D1C130-8F87-4109-8D61-E73A46083F52]--><!--Topic GUID: [GUID-4D155BCB-9394-4991-9CE3-2B738924D5D4]--><body><div id="content"><div class="header"><h1>
Query widget
</h1><div id="breadcrumb"></div></div>
<p id="GUID-4DE4E990-0A50-4983-9FF3-61569082CA8C"> The Query widget allows you to retrieve information from source data by executing a predefined query. Data sources can be one of the following:</p><ul purpose="ul" id="UL_02E191F41DB145E8A6C15293B2CB98F8"><li purpose="li" id="LI_84C90CD963274775800A95B08414D913">Feature layer in the current map </li><li purpose="li" id="LI_8ECE25D624F146E5AAF6B2DD476135E7">Feature layer as an item in the portal</li><li purpose="li" id="LI_AC4261C17DF2453CA889C1DBCDC105BE">Feature layer  from ArcGIS Server rest  service<div class="notes" id="GUID-7B2B8629-FF90-4B56-8F39-DE7D99DDAE93"><div class="tip"><img class="note_img" src="rsrc/tip.png" alt="Tip" title="Tip"><span>Tip:</span></div><div class="tipbody"><p id="GUID-6D50504D-B46B-4E7A-9DC3-AFFFFA91F7CA">A feature layer can be from a map service or a feature service.</p></div></div></li></ul> 

<p id="GUID-0EF193B8-29CC-4BF9-81FF-B604E96E7897"> The Query widget serves as a query builder during configuration,  allowing you to define the query by specifying source data, filter expression, and displaying fields in query results. Each query works with a single layer. However, you can define multiple queries for a single application and data layers can be from multiple sources.</p><div class="section1" id="GUID-5882587B-971C-446A-9D0A-8C5541CC8D70" purpose="section1"><h2>
Configuring the Query widget
</h2><p id="GUID-95D208E5-0F56-4344-AFD8-9CB7C8583A83">The following steps indicate how to create a definition query. Repeat these steps if you need to define multiple queries.</p></div>
 <div class="wfsteps" purpose="wfsteps"><h4></h4><div class="steps" id="GUID-28DA7D81-9EEC-40F6-BB08-B0C99B889E36"><div class="step_title">Steps:</div><ol>
<li purpose="step" id="GUID-C4B7C1A6-E449-446E-94DB-074B5BCD7091">
<span purpose="cmd" id="GUID-D2FDE6C7-822A-4FD1-BAF2-7128FB59F0F1">
Hover the mouse over the Query widget and click the small edit icon
<img purpose="img" placement="inline" alt="Edit" title="Edit" src="03w3/GUID-31D329BD-BC73-4BBE-AE1D-3A1261BF912A-web.png">.</span>
<div class="stepresult" purpose="stepresult"><p id="GUID-5BBC15C5-D5CB-4FC5-B849-53E856BC4642">The configuration window for this widget opens.</p></div></li>
<li purpose="step" id="ESRI_STEP_79E74585DA5E4AE2BC6D6276E5A73F0E"><span purpose="cmd" id="GUID-0BF93AA2-EA79-4B8E-BC7C-5AACD6C115CF">Optionally, click <span class="uicontrol">change widget icon</span> if you want to replace the default icon for this widget.</span><div class="stepresult" purpose="stepresult"><p id="GUID-00ECBC9C-227E-417A-824E-AEC92A6216E6">A file explorer window opens allowing you to browse to a  local image file to use as the widget icon.</p></div></li><li purpose="step" id="ESRI_STEP_70BB580BE1DA46D1A2018143B7C057CC"><span purpose="cmd" id="GUID-720E6BFA-56E6-4FD3-A050-F7151EEE9A5C">Click <span class="uicontrol">Add New</span> next to Query Tasks.</span><div class="stepresult" purpose="stepresult"><p id="GUID-195793D7-B1A5-40E0-8A1C-8BD3BBA196DD">The <span class="uicontrol">Set Data Source</span> window opens. By default, <span class="uicontrol">Select from Map</span> is chosen and all feature layers in the current map are listed below. </p><div class="image" purpose="image"><table><tr><td><img class="break" src="03w3/GUID-8FDFB630-9CBC-4E41-BB54-3AF976BF19DE-web.png" purpose="img" alt="Set data source" title="Set data source"></td></tr></table></div><p id="GUID-6F5AEB32-9D8B-4BEC-AF22-7AA54E76D80D">Alternatively, you can choose <span purpose="ph" ishcondition="agol_plat=wab_dev"> from your portal </span> or <span class="uicontrol">Add Service URL</span>.</p></div></li><div class="stepinfo" purpose="stepinfo"><div class="notes" id="GUID-EC377E81-2D2A-45A2-A544-732DEB106B98"><div class="caution"><img class="note_img" src="rsrc/caution.png" alt="Caution" title="Caution"><span>Caution:</span></div><div class="tipbody"><p id="GUID-FA98A457-3C2D-4344-AB80-F52865F141D7">Web AppBuilder  integrated in ArcGIS Online can access  public and secured services from ArcGIS Server. For secured services, however, it does not  support ArcGIS Server with Web Tier authentication, such as  IWA, PKI, or LDAP authentication. Refer to ArcGIS Online <a class="xref" target="_blank" rel="http://resources.arcgis.com/en/help/arcgisonline/010q/010q000000m3000000.htm" href="http://resources.arcgis.com/en/help/arcgisonline/010q/010q000000m3000000.htm">ArcGIS Sever web services</a> for more information.</p></div></div></div><li purpose="step" id="ESRI_STEP_4EAFD0D5E0A74E2DB4466DF150459C67"><span purpose="cmd" id="GUID-ED1CFA68-BE5D-436B-BD87-1CDB01538895">Choose the radio button next to a data source.</span></li><li purpose="step" id="ESRI_STEP_F988D60B0D754DE6A29DE8A1759F2FBA"><span purpose="cmd" id="GUID-26A585DC-24BD-4F75-B106-004F656A993C">Select a layer from the list.</span></li><li purpose="step" id="ESRI_STEP_3BAAE476512442D088E236D3A7E2AA54"><span purpose="cmd" id="GUID-D5B34A70-42C7-48FA-94F4-5DF554E01ED5">Click <span class="uicontrol">OK</span> to close the Set Data Source window and return to the query configuration window.</span><div class="info" purpose="info"><p id="GUID-75469082-9034-42DC-8301-F3712DF34BCD">By default, the <span class="uicontrol">Filter Definition</span> tab is active.</p></div></li><li purpose="step" id="ESRI_STEP_68C321EA0B5E42C9B312AFD92352A65B"><span purpose="cmd" id="GUID-74057DE4-BA9B-49D7-A3D0-B1AF303F5F80">Click <span class="uicontrol">Add a filter expression</span> to display the expression builder.</span></li><li purpose="step" id="ESRI_STEP_D70433A23ED84BCABF6E8F94DF63FA10"><span purpose="cmd" id="GUID-B6141F85-BB43-4161-9BD0-281789540CE0">Select a query field, an expression, and provide a value in the text box. Optionally, choose the <span class="uicontrol">Unique</span> option to list all unique values for the selected field in the  layer. This option is handy when your selected field is a string or number.</span></li><div class="stepinfo" purpose="stepinfo"><div class="image" purpose="image"><table><tr><td><img class="break" src="03w3/GUID-CA8D79C2-00DE-446D-A4FA-EE38242AF1D2-web.png" purpose="img" alt="Filter expression" title="Filter expression"></td></tr></table></div><p id="GUID-73B7DE39-DDCA-45CC-B982-A0BBE6E78825">The filter expression can be a value based operation or  an operation between two fields. Choosing the <span class="uicontrol">Unique</span> option lists the unique values for the selected field in the layer. By default, <span class="uicontrol">Value</span> is chosen.</p></div><li purpose="step" id="ESRI_STEP_A6E024DA1CFA40DFAE165BABDFF01323"><span purpose="cmd" id="GUID-A8F37A06-32EE-4F22-9C4E-3FEB866B1014">Optionally, check  <span class="uicontrol">Ask for values</span>. </span></li><div class="stepinfo" purpose="stepinfo">When this option is chosen, your input value is the default query value and you have the choice of providing a new value to  overwrite the default value at run time. <div class="notes" id="GUID-DC737757-A96F-49A9-A114-E942E2AD08F6"><div class="note"><img class="note_img" src="rsrc/note.png" alt="Note" title="Note"><span>Note:</span></div><div class="tipbody"><p id="GUID-E2203074-69FA-41D0-B1D9-30D805932F50">When this option is chosen, provide both prompt texts and hint texts to save the query successfully; otherwise, an error message displays.</p></div></div> </div><li purpose="step" id="ESRI_STEP_4D796162BA2A4AEFB0F8EF6264B16CF6"><span purpose="cmd" id="GUID-4751C28B-CDE4-4F72-A5AD-A67509BE83E1">You also have the option to use  the <span class="uicontrol">Add an expression set</span>, which allows you to define and apply two filters to a single query. Depending on if  <span class="uicontrol">All</span>  or <span class="uicontrol">Any</span> of the expressions in this set are true, either records meeting all the expressions or records meeting any of the expressions in the set return as the results.</span></li><li purpose="step" id="ESRI_STEP_FFB681AAEDB9428AA04CD26B137FB993"><span purpose="cmd" id="GUID-DEF59573-C9B1-4806-9329-C0444077088F">Click the <span class="uicontrol">Results Setting</span> tab to activate it.</span><div class="info" purpose="info"><p id="GUID-F09CE5FA-AEE8-4863-8A1E-1AB2D50DDAE1"> <div class="image" purpose="image"><table><tr><td><img class="break" src="03w3/GUID-A4C386DF-0785-428C-8DD5-232D08E0B288-web.png" purpose="img" alt="Results setting" title="Results setting"></td></tr></table></div></p><p id="GUID-E06B361B-E445-411F-AB70-649B5629BEE0">This tab allows you to configure the displayed title and contents for the query results. Fields from the data layer available for display show in this tab.</p></div></li><li purpose="step" id="ESRI_STEP_445476A1B44A4B05BE2EBD70E45AFA8C"><span purpose="cmd" id="GUID-9DABF942-C536-4AA8-B20D-064FCDB9B1D2">Click <span class="uicontrol">Add Field</span> next to the title text box.</span><div class="stepresult" purpose="stepresult"><p id="GUID-1CF81FB6-CA06-4B01-BDF4-34BDDC35EE2F">The list of  fields in the layer display and allows you to select one at a time. Values from the selected field display in the text box and are used as the query results title. Repeat this step to add additional fields. When multiple fields are added, the concatenation of field values are used as the result title.</p></div></li><li purpose="step" id="ESRI_STEP_40A72CC3730444A1894FFBFB12B59DA4"><span purpose="cmd" id="GUID-938C4E99-8F46-45E8-890C-FEEBA2A526B1">Check the fields you want to display in the results. For individual fields, the <span class="uicontrol">Special Type</span> column allows them to display as a link or an image according to your selection. You can also click the up or down arrows in the <span class="uicontrol">Actions</span> column to adjust the field order. </span></li><li purpose="step" id="ESRI_STEP_E1F1B24A66A7413AADBB6B720A5A1023"><span purpose="cmd" id="GUID-B1AEA01A-1E78-447B-BCE5-A15C128AFAA1">Click the symbol for the query results.</span><div class="stepresult" purpose="stepresult"><p id="GUID-AC6017DE-4AD0-489B-BB0A-517514E1B177">The preview window opens, allowing you to choose the color and style for the result highlighting symbol.</p><div class="image" purpose="image"><table><tr><td><img class="break" src="03w3/GUID-B953E67E-A639-4513-9064-3F8D66150FC6-web.png" purpose="img" alt="Set results symbol" title="Set results symbol"></td></tr></table></div></div></li><li purpose="step" id="ESRI_STEP_2505E8182535486783FA2F81582AE337"><span purpose="cmd" id="GUID-89101BAE-917D-4780-A644-25ABF8E81BD5">Click anywhere outside of the symbol preview window to close it.</span></li><li purpose="step" id="ESRI_STEP_07B123FAF5CC4F99AE11563DF84A2073"><span purpose="cmd" id="GUID-324E6BAC-1324-46FF-A8EE-5371E29AEC91">Click <span class="uicontrol">OK</span> to close the Query window.</span><div class="stepresult" purpose="stepresult"><p id="GUID-A9E4BC0A-10A9-4385-9C2C-928DE09DAFE8">The query definition is saved and the query configuration window closes.</p></div></li></ol></div></div>
<div class="section1" id="ESRI_SECTION1_93B7EEDFDDDB4389B1F994E7792FF6DA" purpose="section1"><h2>Using the Query widget</h2><p id="GUID-A7B8A183-4E22-4AF8-8488-6F58997D3057">Clicking the Query widget in your application displays the list of predefined queries. Selecting a query displays the options for executing it:</p><div class="image" purpose="image"><table><tr><td><img class="break" src="03w3/GUID-0C1C32B6-3B0B-4304-85F4-E902159241C2-web.png" purpose="img" alt="Select a query" title="Select a query"></td></tr></table></div><ul purpose="ul" id="UL_4D138CDA7FFF4E5183E9B17532C8A48D"><li purpose="li" id="LI_8A1B3FB0862B47219229729AC31A174D">If <span class="uicontrol">Ask for values</span> is specified at configuration time, a text box displays prompting you for a new value for the parameter.   The default value shows in the box initially.  If the unique values are set, the text box will list all of them for you to choose from.<p id="GUID-383D7079-1E0B-4493-93B1-28A767F4989E"><div class="image" purpose="image"><table><tr><td><img class="break" src="03w3/GUID-369C41A4-EB1F-427B-A110-68B3F60A0750-web.png" purpose="img" alt="Options" title="Options"></td></tr></table></div></p></li><li purpose="li" id="LI_FD66C3D85A6C4F338963A18AE78C4B00">Use spatial filter—The spatial filter is applied on top of the query definition.<ul purpose="ul" id="UL_B791A4EAD12F487D8F4A9B54B95F8180"><li purpose="li" id="LI_73986442E6ED48D1A573F17B9FAAB55B">Use current map extent—Only features falling within the current map extent and meeting the query definition return. </li><li purpose="li" id="LI_4B8A135A050F48459E18B008B06CBE84">Draw a graphic on the map—Only features falling within the graphic and meeting the query definition return.</li></ul></li><li purpose="li" id="LI_BCDA37DD7C6E4B0085F69AFA16E5DAFB">Add result as operational layer—When this option is checked, query results remain on the map until  the  <span class="uicontrol">Clear Results</span> button is clicked.</li></ul><p id="GUID-FE28698F-E913-433B-A42B-1F962F36DBAB">You can select none or multiple options. Click <span class="uicontrol">Apply</span> to execute the query and display the results. Features resulted from the query highlight on the map with the symbol specified at configuration time.</p><div class="image" purpose="image"><table><tr><td><img class="break" src="03w3/GUID-E86942EC-4833-4DFE-B89D-A486AD50D9AB-web.png" purpose="img" alt="Query result" title="Query result"></td></tr></table></div></div><div class="wfsummary" id="GUID-333ED4F8-5917-420D-8D4E-9CB224188B25" purpose="wfsummary">
</div>
<div class="footer"> Copyright © 1995-2014 Esri. All rights reserved. </div></div></body></html>